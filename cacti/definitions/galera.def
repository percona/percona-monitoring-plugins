# This is the template definition file.  To use it, see pmp-cacti-template.
#
# This program is copyright (c) 2013 Roman Vynar. Feedback and improvements
# are welcome.
#
# THIS PROGRAM IS PROVIDED "AS IS" AND WITHOUT ANY EXPRESS OR IMPLIED
# WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
# MERCHANTIBILITY AND FITNESS FOR A PARTICULAR PURPOSE.
#
# This program is free software; you can redistribute it and/or modify it under
# the terms of the GNU General Public License as published by the Free Software
# Foundation, version 2.
#
# You should have received a copy of the GNU General Public License along with
# this program; if not, write to the Free Software Foundation, Inc., 59 Temple
# Place, Suite 330, Boston, MA  02111-1307  USA.

# Autobuild: ss_get_mysql_stats.php

{
   name   => 'Galera Server',
   hash   => 'hash_02_VER_a8251f09e031c3bcc532129d09632138',
   version => {
      version => '$VERSION$',
      hash    => 'hash_06_VER_5999c02c3ca3bb2bfef6030202387bfb',
   },
   checksum => 'hash_06_VER_e79078a3bcda80f4a4e718b54e497c4c',
   graphs => [
      {  name 		=> 'Galera Writeset Traffic',
         base_value => '1024',
         hash  		=> 'hash_00_VER_0f6ed37fd01ad8d1e3f0c1ae95638e10',         
         dt         => {
            input => 'Get Galera Stats',            
            hash  => 'hash_01_VER_8792fb7377460755c2a39e1124215199',         
            wsrep_replicated_bytes => {
               data_source_type_id => '3',
               hash => 'hash_08_VER_1e7c70f4767d3f930fc2a294eaa010cc',
            },
            wsrep_received_bytes => {
               data_source_type_id => '3',
               hash => 'hash_08_VER_32a5fe611f008190c0986dc1625458e9',
            },
         },
         items => [
            {  color  => '4B2744',
               hashes => [
                  'hash_10_VER_77a452783c059d2b4b7b296f2382530e',
                  'hash_10_VER_59988c3da8e8bb35510491107b575819',
                  'hash_10_VER_829fe1332208217df6d0fc9e6da9a29d',
                  'hash_10_VER_076443c9769d138dff7cc9d3d98c9519',
               ],
               item => 'wsrep_replicated_bytes',
               task => 'hash_09_VER_ca309dcb071d7d05060ae2779f313bb8',
               type => 'AREA',
            },
            {  color  => 'E4C576',
               hashes => [
                  'hash_10_VER_36a60291848c0ecf141bcdd1ba340fd1',
                  'hash_10_VER_9398cc02edd4635831453a94272368aa',
                  'hash_10_VER_ad87b7d0066cc0f49aa732a1d3ffbde4',
                  'hash_10_VER_92954cdce13e32ac68d2ab614a862b66',
               ],
               item => 'wsrep_received_bytes',
               task => 'hash_09_VER_b898689c229c8f67a507da07f29d8039',
               type => 'AREA',
               cdef => 'Negate',
            },
         ],
      },
      {  name 		=> 'Galera Writeset Count',
         base_value => '1000',
         hash  		=> 'hash_00_VER_3617d6b27b9a77d87e10855c54af35bf',
         dt         => {
            input   => 'Get Galera Stats',
            hash    => 'hash_01_VER_587142d5025d38ec5114c636dc058102',
            wsrep_replicated => {
               data_source_type_id => '3',
               hash => 'hash_08_VER_9c091dfa3500f9c2cfc5d1bb5eb8aae7',
            },
            wsrep_received => {
               data_source_type_id => '3',
               hash => 'hash_08_VER_d48c28713ca2cf4d682aadf259726d67',
            },
         },
         items => [
            {  color  => '5F8FB3',
               hashes => [
                  'hash_10_VER_9d22292cc2c45c8f06a81524af901e5b',
                  'hash_10_VER_74f7cf87b4e1eda94874f540e063f4bf',
                  'hash_10_VER_1206e19127304c1c47433a729c37a1e2',
                  'hash_10_VER_bb40d31371dfcfd34508c4786578efb6',
               ],
               item => 'wsrep_replicated',
               task => 'hash_09_VER_9530ce229ab0279a6f28888a8b2e5300',
               type => 'AREA',
            },
            {  color  => '8D85F3',
               hashes => [
                  'hash_10_VER_c6cb097c3a971a07ccaf6c23b2b5d4ae',
                  'hash_10_VER_3f6a09783d4f8324062c497d9ef44783',
                  'hash_10_VER_bf1991b381701cd971f83260ba6b165d',
                  'hash_10_VER_5bd678918d4e001d65844c428a777324',
               ],
               item => 'wsrep_received',
               task => 'hash_09_VER_4d8d6b26071d88d0e349039e0423c97f',
               type => 'AREA',
               cdef => 'Negate',               
            },
         ],
      },   
      {  name 		=> 'Galera Writeset Size',
         base_value => '1024',
         hash  		=> 'hash_00_VER_32cc0d0103a99de8919d2242ae3234e8',
         dt         => {
            input   => 'Get Galera Stats',
            hash    => 'hash_01_VER_c7181103afe86e06063d56c10331644c',
            wsrep_replicated_bytes => {
               data_source_type_id => '3',
               hash => 'hash_08_VER_60ead95288181bdf444cc0e9ef09b8bb',
            },
            wsrep_received_bytes => {
               data_source_type_id => '3',
               hash => 'hash_08_VER_9190f5b16f07165833a8a27cadfe0523',
            },            
            wsrep_replicated => {
               data_source_type_id => '3',
               hash => 'hash_08_VER_c671ff95cfc164a495a12ee4e16140a3',
            },
            wsrep_received => {
               data_source_type_id => '3',
               hash => 'hash_08_VER_97c4767a49d0179365c6c8639bed021f',
            },            
		 },         
         items => [
            {  color  => '75AD6F',
               hashes => [
                  'hash_10_VER_65f62ffe9c1ffa329b9857c98fc606b1',
                  'hash_10_VER_86303ec82acbddd1fd1903187eda214f',
                  'hash_10_VER_d31c3750e4887cc813ddff0bd79ffea9',
                  'hash_10_VER_d0103d89831ab97fa39c795c4ece469a',
               ],
               item => 'wsrep_replicated',
               task => 'hash_09_VER_516afb4a69a048efbf7a11cec2a954e7',               
               type => 'AREA',
               cdef => 'Galera Writeset Size Repl',
               text => 'Writeset Size Replicated',                      
            },
            {  color  => 'FCB46F',
               hashes => [
                  'hash_10_VER_d6c10021175be73b7dd414a098ffef26',
                  'hash_10_VER_44831e871fe772aa13547e28ba1b264b',
                  'hash_10_VER_bc024a90f09676a29c797ca8534b97d2',
                  'hash_10_VER_07bb7547e634dc5cc620c0523daec62d',
               ],
               item => 'wsrep_received',
               task => 'hash_09_VER_543e63b9b3a9ffede3b2c037720a731d',               
               type => 'AREA',
               cdef => 'Galera Writeset Size Recv Negate',
               text => 'Writeset Size Received',                     
            },
            {  color  => 'None',
               hashes => [
                  'hash_10_VER_6843b7fb6b3d70f0e5dc2767875be21f',
               ],
               item => 'wsrep_received_bytes',
               task => 'hash_09_VER_e6dc87b5d91cdfadc68e3f370b83611f',
               type => 'COMMENT',   
               text => '',       
            },       
            {  color  => 'None',
               hashes => [
                  'hash_10_VER_e698f23e85d4cd8d1b1f7ca96aee8134',
               ],
               item => 'wsrep_replicated_bytes',
               task => 'hash_09_VER_9547863a11dc3770e57cacdb5afa575e',
               type => 'COMMENT',
               text => '',                       
            },       
         ],
      },               
      {  name 		=> 'Galera Writing Conflicts',
         base_value => '1000',
         hash 		=> 'hash_00_VER_daca04482fd982c247a11f17a73d6b99',
         dt         => {
            input   => 'Get Galera Stats',
            hash    => 'hash_01_VER_b09efb86d3b51e596efe1c963c6a3b13',
            wsrep_local_cert_failures => {
               data_source_type_id => '3',
               hash => 'hash_08_VER_3e20fe4da5dba1c85d3df321aded7224',
            },
            wsrep_local_bf_aborts => {
               data_source_type_id => '3',
               hash => 'hash_08_VER_94676a16acc416308954a706e2f863f2',
            },
         },
         items => [
            {  color  => 'C2452C',
               hashes => [
                  'hash_10_VER_73154ba9938724e40884935579b70f17',
                  'hash_10_VER_a8fd854c3abaf2607e14d22d4bf6e4ce',
                  'hash_10_VER_ff9106bd454d40e18a6cc12c57db1799',
                  'hash_10_VER_79ce15825d1db1a28448c424d10e642e',
               ],
               item => 'wsrep_local_cert_failures',
               task => 'hash_09_VER_39a820b7588320438a58c75f9792b6eb',
               type => 'LINE1',
            },
            {  color  => '1B456D',
               hashes => [
                  'hash_10_VER_e88aa035efafca4f796ef2b885ef10b1',
                  'hash_10_VER_b58e9b4778e2180afa392129e3c24162',
                  'hash_10_VER_ea2077d7dbba12cf4ea2acd7b146eb0d',
                  'hash_10_VER_e7e20412c7f4130cb0e84a91f386c383',
               ],
               item => 'wsrep_local_bf_aborts',
               task => 'hash_09_VER_5f1934ac8a37237134733f47c265e752',
               type => 'LINE1',
            },
         ],
      },
      {  name 		=> 'Galera Replication Queues',
         base_value => '1024',
         hash  		=> 'hash_00_VER_1c17e6a91e22a21c190ff92ae4719f70',         
         dt         => {
            input => 'Get Galera Stats',            
            hash  => 'hash_01_VER_061e3056866adf78dc28fe8db0241fd2',         
            wsrep_local_send_queue => {
               data_source_type_id => '1',
               hash => 'hash_08_VER_f46577573d4b7d912208ba3c09bfcd29',
            },
            wsrep_local_recv_queue => {
               data_source_type_id => '1',
               hash => 'hash_08_VER_e9ccbedf0a403aa73a4108ee5e9f0029',
            },
         },
         items => [
            {  color  => '75637E',
               hashes => [
                  'hash_10_VER_c1f8f523a35cbc72556d21413c671dff',
                  'hash_10_VER_217a877a87b96cf0ff0130c4ed838b2e',
                  'hash_10_VER_d3351c47c1395b6602c77e75cfd7ffa2',
                  'hash_10_VER_3e4261659f6b0df22e71ccbf3f6eebea',
               ],
               item => 'wsrep_local_send_queue',
               task => 'hash_09_VER_ee3d049e75796a3e086610aa8852001d',
               type => 'AREA',
            },
            {  color  => '81BFE0',
               hashes => [
                  'hash_10_VER_2227e2f12f4f45ed176c28874c28d8a6',
                  'hash_10_VER_86ba7cb371a30c145a62398b9bf452db',
                  'hash_10_VER_6b5487687c9ff93080d15584f2fd3b43',
                  'hash_10_VER_2b8f5767a0136e81726e87a5635e5c17',
               ],
               item => 'wsrep_local_recv_queue',
               task => 'hash_09_VER_c15329ccf7f6c27d6dc9165fa5b014f6',
               type => 'AREA',
               cdef => 'Negate',
            },
         ],
      },         
      {  name 		=> 'Galera Parallelization Efficiency',
         base_value => '1000',
         hash  		=> 'hash_00_VER_e3520890976c937c72438a0dfb93d39c',
         dt         => {
            input   => 'Get Galera Stats',
            hash    => 'hash_01_VER_3eae8cd4fa806d457ad98e7866789dff',
            wsrep_apply_window => {
               data_source_type_id => '1',
               hash => 'hash_08_VER_1b02f76269be853ecfcab001910d08c9',
            },
            wsrep_commit_window => {
               data_source_type_id => '1',
               hash => 'hash_08_VER_169bddeb58b7ad307c412a16efcb5284',
            },
            wsrep_cert_deps_distance => {
               data_source_type_id => '1',
               hash => 'hash_08_VER_b6a6ab314edc0ac35fa67c0b2941d33c',
            },            
         },
         items => [
            {  color  => '3E7AA7',
               hashes => [
                  'hash_10_VER_489adaa14392f0de52acc068b40aa950',
                  'hash_10_VER_7232cb91e95c0e164a5157a38ef204c9',
                  'hash_10_VER_1597bc897910673958be3ed747bd1c41',
                  'hash_10_VER_ca74654c35293652234ce52c4cdf73c0',
               ],
               item => 'wsrep_apply_window',
               task => 'hash_09_VER_3913ef2ead012d6db5014c0f52e4ea27',
               type => 'LINE1',
            },
            {  color  => '48A73E',
               hashes => [
                  'hash_10_VER_5076463e4067a6473534ce5373052455',
                  'hash_10_VER_5b7d55e376961969f9cb217dee88a394',
                  'hash_10_VER_3540f59ed3756d6c7a62021ba4d0e799',
                  'hash_10_VER_67e793b6b18cdcb7de3171544923a491',
               ],
               item => 'wsrep_commit_window',
               task => 'hash_09_VER_6c6ab1776d3161d712091d871093ec11',
               type => 'LINE1',
            },
            {  color  => 'A7503E',
               hashes => [
                  'hash_10_VER_db92e4a73e524ea6e2354f7a474242f5',
                  'hash_10_VER_2adae75c2b99edf216ed0c7662d1f015',
                  'hash_10_VER_df4a3465fec1016244abddf870cdc983',
                  'hash_10_VER_74911a93b73829fb7b94fb4957861e97',
               ],
               item => 'wsrep_cert_deps_distance',
               task => 'hash_09_VER_be22bc208c13e9665da8cd324157f609',
               type => 'LINE1',
            },            
         ],
      },      
      {  name 		=> 'Galera Cluster Size',
         base_value => '1000',
         hash  		=> 'hash_00_VER_57463c2e50ecc7928c091c6b26c23e13',
         dt         => {
            input => 'Get Galera Stats',            
            hash  => 'hash_01_VER_308d8d9d47706538eb1a2efd6ded6d74',         
            wsrep_cluster_size => {
               data_source_type_id => '1',
               hash => 'hash_08_VER_b8e5b5ef44993f8993c0bf1728bd496b',
            },
         },
         items => [
            {  color  => '6EA100',
               hashes => [
                  'hash_10_VER_459f963099be1e942d9e8235b9d31d89',
                  'hash_10_VER_9096e7028c09cdab9e70b320e0b9373e',
                  'hash_10_VER_7432b123f1bc7f11945f355ad15b1fa1',
                  'hash_10_VER_fe968f31e49b67d1c8c2654e0c24dc89',
               ],
               item => 'wsrep_cluster_size',
               task => 'hash_09_VER_91d37bbc069d88dafb1c478103ea38c6',
               type => 'AREA',
            },
         ],
      },      
      {  name 		=> 'Galera Flow Control',
         base_value => '1000',
         hash  		=> 'hash_00_VER_e5ae7e0f60d1c4a657b566dfc2d84221',
         dt         => {
            input   => 'Get Galera Stats',
            hash    => 'hash_01_VER_d78ad5f8d18b9dd32dead283759cd1f3',
            wsrep_flow_control_paused => {
               data_source_type_id => '1',
               hash => 'hash_08_VER_fd1b99225df6a36eaa4ad5c8d6d9a4fe',
            },
            wsrep_flow_control_sent => {
               data_source_type_id => '1',
               hash => 'hash_08_VER_ae4e42ed4db053dd794f83104a95ccb3',
            },
            wsrep_flow_control_recv => {
               data_source_type_id => '1',
               hash => 'hash_08_VER_f51890e7af46cd785de66362836ae61f',
            },            
         },
         items => [
            {  color  => 'FF0000',
               hashes => [
                  'hash_10_VER_01905908ad61659bf6187e38c0ba1773',
                  'hash_10_VER_e4ef4bdeb913cc9f766f9edac571b0c3',
                  'hash_10_VER_57e21919524aaaefb57f7b5032857cf7',
                  'hash_10_VER_40bb3fb380162e0037279e3959329d9b',
               ],
               item => 'wsrep_flow_control_paused',
               task => 'hash_09_VER_0bc942455caf11287fd6caaa7e8a22d9',
               type => 'LINE1',
            },
            {  color  => '8F005C',
               hashes => [
                  'hash_10_VER_60db629d9b607ba99fad476defea3981',
                  'hash_10_VER_03b7c8b0aeca8c9f154c3c835bebb35f',
                  'hash_10_VER_83dad0704005997a96bf5551033f84fa',
                  'hash_10_VER_210a223516cb5217067a9fcc34e42cc8',
               ],
               item => 'wsrep_flow_control_sent',
               task => 'hash_09_VER_713e2abbec63cfa98e354ee5b49aa3f7',
               type => 'LINE1',
            },
            {  color  => 'FFAB00',
               hashes => [
                  'hash_10_VER_d67ef9607c830d5f094a37eb8ff55ae1',
                  'hash_10_VER_142cd8ece68dcacd12d71a40f1d898ab',
                  'hash_10_VER_430558493548045f8dc6fa4efdd34a37',
                  'hash_10_VER_7fcf8a05f9ba3589f921e3b134408bbb',
               ],
               item => 'wsrep_flow_control_recv',
               task => 'hash_09_VER_7ade0ee1fb89a1d08d94ba866fdadcf3',
               type => 'LINE1',
            },            
         ],
      },            
   ],
   inputs => {
      'Get Galera Stats' => {
         hash         => 'hash_03_VER_9585d3083d8362cd95fd9668eefb651f',
         input_string =>
            '<path_php_binary> -q <path_cacti>/scripts/ss_get_mysql_stats.php '
            . '--host <hostname> --items <items> --user <username> --pass <password> '
            . '--port <port>',
         inputs => [
            {  allow_nulls => '',
               hash        => 'hash_07_VER_54dc02e767543a99ae3edee1bf195432',
               name        => 'hostname',
            },
            {  allow_nulls => 'on',
               hash        => 'hash_07_VER_ec1437e4ebaf4382662a0e4e7ceea2ec',
               name        => 'port',
            },
            {  allow_nulls => 'on',
               hash        => 'hash_07_VER_70d5b6500f732b147c22b054f7b49228',
               name        => 'username',
            },
            {  allow_nulls => 'on',
               hash        => 'hash_07_VER_10b379693fb56df23712457ef463c1dc',
               name        => 'password',
            },
         ],
         outputs => {
	        wsrep_replicated_bytes       => 'hash_07_VER_b6fbb4a03ff268f671504fce2f8da8cb',
	        wsrep_received_bytes         => 'hash_07_VER_294dc5282dd664eef2fff5bd5d04e92f',
	        wsrep_replicated             => 'hash_07_VER_3b55a371219de247d6557b65911424dd',
	        wsrep_received               => 'hash_07_VER_fd0fc2cd0d4bc2d53edefc35e865a3ac',	        
	        wsrep_local_cert_failures    => 'hash_07_VER_87d081717e1ab8b7b59b7903855a0497',
	        wsrep_local_bf_aborts        => 'hash_07_VER_83709308ef8fea2a7445ed34a21c927c',
	        wsrep_local_send_queue       => 'hash_07_VER_c5f7ff38f21dc023c21aa1510f196eab',
	        wsrep_local_recv_queue       => 'hash_07_VER_2c85a4d59c851369da14752d5e95d9db',
	        wsrep_cluster_size           => 'hash_07_VER_8b8dcc663139acf74142d69183e1442a',
	        wsrep_cert_deps_distance     => 'hash_07_VER_65b0a1e8393880aaba1cc08d0146a632', 
	        wsrep_apply_window           => 'hash_07_VER_92a687418a94ea223f01a49c7562a982',
	        wsrep_commit_window          => 'hash_07_VER_7b26293de7b7fefbab4ef80fcbc79f73',
	        wsrep_flow_control_paused    => 'hash_07_VER_14b6b457f939c07b61a1ce1804905349', 
	        wsrep_flow_control_sent      => 'hash_07_VER_2b7fdc3cbf813d299b028578515b4fd5',
	        wsrep_flow_control_recv      => 'hash_07_VER_eb5c6902548ef229e3183c8e1ee71500',	        
         },
         type_id => 1
      },
   },
   cdefs => {
	  'Galera Writeset Size Recv' => {
	     hash  => 'hash_05_VER_7a6a04bd966b84b175bf15e1798fbc5c',
	     items => [
	        {  type  => 6,
	           value => 'c',
	           hash  => 'hash_14_VER_89333db5a86d8cec33ebb49b2fc6fa8d',
	        },
	        {  type  => 6,
	           value => 'b',
	           hash  => 'hash_14_VER_526776edd3a511907de8424f4243ba99',
	        },
	        {  type  => 2,
	           value => '4',
	           hash  => 'hash_14_VER_fbbbabb0a9c95f69d63cd9e235cb47d2',
	        },
	     ],
	  },
	  'Galera Writeset Size Recv Negate' => {
	     hash  => 'hash_05_VER_6c166022b44da208149eef5cde55a196',
	     items => [
	        {  type  => 6,
	           value => 'c',
	           hash  => 'hash_14_VER_c6b90aa72afbda572370d89b98b628ee',
	        },
	        {  type  => 6,
	           value => 'b',
	           hash  => 'hash_14_VER_3f74e6aac1237389c375577d359c9b6b',
	        },
	        {  type  => 2,
	           value => '4',
	           hash  => 'hash_14_VER_f4585f990eb9d9f792e9244365d98ed8',
	        },
	        {  type  => 6,
	           value => '-1',
	           hash  => 'hash_14_VER_89a49ada5537b94373301dbc1648b4dd',
	        },
	        {  type  => 2,
	           value => '3',
	           hash  => 'hash_14_VER_ca8162d1d01a925545c7ad8471895d3e',
	        },
	     ],
	  },
	  'Galera Writeset Size Repl' => {
	     hash  => 'hash_05_VER_70da42cce969f755b7a136af3e3f306f',
	     items => [
	        {  type  => 6,
	           value => 'd',
	           hash  => 'hash_14_VER_247c57034fa5444366cc9b2e13c0589e',
	        },
	        {  type  => 6,
	           value => 'a',
	           hash  => 'hash_14_VER_ddf2dc85866bb96c679864abdf3261dd',
	        },
	        {  type  => 2,
	           value => '4',
	           hash  => 'hash_14_VER_64a7351f6622f334715513b4fc36ca7f',
	        },
	     ],
	  },
   }, 
};
